)) |>
group_by(topic) |>
slice_max(beta, n = 20) |>
ungroup() |>
arrange(topic, -beta) |>
ggplot(aes(x = beta, y = reorder_within(term, beta, topic), fill = topic)) +
geom_col() +
scale_fill_manual(
values = c("1. Recommended" = "#8ac926",
"2. Everything else" = "#ff595e")
) +
facet_wrap(~ topic, scales = "free_y") +
scale_y_reordered() +
labs(title = "20 most-probable bigram per topic",
subtitle = "From Google reviews of restaurants in the Klang Valley.\nOnly shows bigrams that occur more than 20 times in the dataset.",
y = "",
x = "Per-topic probability (beta)") +
guides(fill = "none") +
theme(strip.background = element_rect(fill = "black"),
strip.text = element_text(size = 10, face = "bold"))
ggsave(here("plots", "google_lda.png"),
width = 7, height = 5, units = "in", dpi = 300)
google_bigrams_topics |>
# Remember topic 1 is recommended
mutate(topic = ifelse(
topic == 1, "2. Everything else", "1. Recommended"
)) |>
filter(term %in% c(
# Because they stayed long enough for dessert?
"ice cream",
"indian food",
"chinese restaurant",
"roast pork",
"salted egg",
"dim sum",
"nasi lemak",
"fried chicken",
"fried rice",
"japanese food",
"thai food",
"chicken rice",
"italian restaurant",
"western food",
"nasi kandar",
"char siew"
)) |>
ggplot(aes(x = beta,
y = fct_rev(topic))) +
geom_col(aes(fill = topic)) +
scale_fill_manual(
values = c("1. Recommended" = "#8ac926",
"2. Everything else" = "#ff595e")
) +
facet_wrap(~ term) +
guides(fill = "none") +
theme(strip.background = element_rect(fill = "black"),
axis.text.x = element_text(size = 7)) +
labs(title = "Per-topic probabilities of foods and cuisines",
subtitle = "Google reviews in the Klang Valley",
y = "")
ggsave(here("plots", "google_lda.png"),
width = 7, height = 4, units = "in", dpi = 300)
google_bigrams_topics |>
# Remember topic 1 is recommended
mutate(topic = ifelse(
topic == 1, "2. Everything else", "1. Recommended"
)) |>
filter(term %in% c(
"reasonable price",
"highly recommend",
"highly recommended",
"amazing food",
"nice environment",
"food quality",
"nice food",
"bit pricey",
"excellent service",
"decent food",
"friendly staff",
"excellent food"
)) |>
ggplot(aes(x = beta,
y = fct_rev(topic))) +
geom_col(aes(fill = topic)) +
scale_fill_manual(
values = c("1. Recommended" = "#8ac926",
"2. Everything else" = "#ff595e")
) +
facet_wrap(~ term) +
guides(fill = "none") +
theme(strip.background = element_rect(fill = "black")) +
labs(y = "",
title = "Per-topic probabilities of general restaurant descriptors")
google_bigrams_topics |>
# Remember topic 1 is recommended
mutate(topic = ifelse(
topic == 1, "2. Everything else", "1. Recommended"
)) |>
group_by(topic) |>
slice_max(beta, n = 20) |>
ungroup() |>
arrange(topic, -beta) |>
ggplot(aes(x = beta, y = reorder_within(term, beta, topic), fill = topic)) +
geom_col() +
scale_fill_manual(
values = c("1. Recommended" = "#8ac926",
"2. Everything else" = "#ff595e")
) +
facet_wrap(~ topic, scales = "free_y") +
scale_y_reordered() +
labs(title = "20 most-probable bigram per topic",
subtitle = "From Google reviews of restaurants in the Klang Valley.\nOnly shows bigrams that occur more than 20 times in the dataset.",
y = "",
x = "Per-topic probability (beta)") +
guides(fill = "none") +
theme(strip.background = element_rect(fill = "black"),
strip.text = element_text(size = 10, face = "bold"))
ggsave(here("plots", "google_lda.png"),
width = 7, height = 5, units = "in", dpi = 300)
google_bigrams_topics |>
# Remember topic 1 is recommended
mutate(topic = ifelse(
topic == 1, "2. Everything else", "1. Recommended"
)) |>
filter(term %in% c(
# Because they stayed long enough for dessert?
"ice cream",
"indian food",
"chinese restaurant",
"roast pork",
"salted egg",
"dim sum",
"nasi lemak",
"fried chicken",
"fried rice",
"japanese food",
"thai food",
"chicken rice",
"italian restaurant",
"western food",
"nasi kandar",
"char siew"
)) |>
ggplot(aes(x = beta,
y = fct_rev(topic))) +
geom_col(aes(fill = topic)) +
scale_fill_manual(
values = c("1. Recommended" = "#8ac926",
"2. Everything else" = "#ff595e")
) +
facet_wrap(~ term) +
guides(fill = "none") +
theme(strip.background = element_rect(fill = "black"),
axis.text.x = element_text(size = 7)) +
labs(title = "Per-topic probabilities of foods and cuisines",
subtitle = "Google reviews in the Klang Valley",
y = "")
ggsave(here("plots", "google_foods_lda.png"),
width = 7, height = 4, units = "in", dpi = 300)
ggsave(here("plots", "google_general_descriptions_lda.png"),
width = 7, height = 4, units = "in", dpi = 300)
google_bigrams_topics |>
# Remember topic 1 is recommended
mutate(topic = ifelse(
topic == 1, "2. Everything else", "1. Recommended"
)) |>
filter(term %in% c(
"reasonable price",
"highly recommend",
"highly recommended",
"amazing food",
"nice environment",
"food quality",
"nice food",
"bit pricey",
"excellent service",
"decent food",
"friendly staff",
"excellent food"
)) |>
ggplot(aes(x = beta,
y = fct_rev(topic))) +
geom_col(aes(fill = topic)) +
scale_fill_manual(
values = c("1. Recommended" = "#8ac926",
"2. Everything else" = "#ff595e")
) +
facet_wrap(~ term) +
guides(fill = "none") +
theme(strip.background = element_rect(fill = "black")) +
labs(y = "",
title = "Per-topic probabilities of general restaurant descriptors")
ggsave(here("plots", "google_general_descriptions_lda.png"),
width = 7, height = 4, units = "in", dpi = 300)
google_bigrams_topics |>
# Remember topic 1 is recommended
mutate(topic = ifelse(
topic == 1, "2. Everything else", "1. Recommended"
)) |>
group_by(topic) |>
slice_max(beta, n = 20) |>
ungroup() |>
arrange(topic, -beta) |>
ggplot(aes(x = beta, y = reorder_within(term, beta, topic), fill = topic)) +
geom_col() +
scale_fill_manual(
values = c("1. Recommended" = "#8ac926",
"2. Everything else" = "#ff595e")
) +
facet_wrap(~ topic, scales = "free_y") +
scale_y_reordered() +
labs(title = "20 most-probable bigram per topic",
subtitle = "From Google reviews of restaurants in the Klang Valley.\nOnly shows bigrams that occur more than 20 times in the dataset.",
y = "",
x = "Per-topic probability (beta)") +
guides(fill = "none") +
theme(strip.background = element_rect(fill = "black"),
strip.text = element_text(size = 10, face = "bold"))
ggsave(here("plots", "google_lda.png"),
width = 7, height = 4, units = "in", dpi = 300)
google_bigrams_topics |>
# Remember topic 1 is recommended
mutate(topic = ifelse(
topic == 1, "2. Everything else", "1. Recommended"
)) |>
filter(term %in% c(
# Because they stayed long enough for dessert?
"ice cream",
"indian food",
"chinese restaurant",
"roast pork",
"salted egg",
"dim sum",
"nasi lemak",
"fried chicken",
"fried rice",
"japanese food",
"thai food",
"chicken rice",
"italian restaurant",
"western food",
"nasi kandar",
"char siew"
)) |>
ggplot(aes(x = beta,
y = fct_rev(topic))) +
geom_col(aes(fill = topic)) +
scale_fill_manual(
values = c("1. Recommended" = "#8ac926",
"2. Everything else" = "#ff595e")
) +
facet_wrap(~ term) +
guides(fill = "none") +
theme(strip.background = element_rect(fill = "black"),
axis.text.x = element_text(size = 7)) +
labs(title = "Per-topic probabilities of foods and cuisines",
subtitle = "Google reviews in the Klang Valley",
y = "")
ggsave(here("plots", "google_foods_lda.png"),
width = 8, height = 5, units = "in", dpi = 300)
google_bigrams_topics |>
# Remember topic 1 is recommended
mutate(topic = ifelse(
topic == 1, "2. Everything else", "1. Recommended"
)) |>
filter(term %in% c(
"reasonable price",
"highly recommend",
"highly recommended",
"amazing food",
"nice environment",
"food quality",
"nice food",
"bit pricey",
"excellent service",
"decent food",
"friendly staff",
"excellent food"
)) |>
ggplot(aes(x = beta,
y = fct_rev(topic))) +
geom_col(aes(fill = topic)) +
scale_fill_manual(
values = c("1. Recommended" = "#8ac926",
"2. Everything else" = "#ff595e")
) +
facet_wrap(~ term) +
guides(fill = "none") +
theme(strip.background = element_rect(fill = "black"),
axis.text.x = element_text(size = 5)) +
labs(y = "",
title = "Per-topic probabilities of general restaurant descriptors")
google_bigrams_topics |>
# Remember topic 1 is recommended
mutate(topic = ifelse(
topic == 1, "2. Everything else", "1. Recommended"
)) |>
filter(term %in% c(
"reasonable price",
"highly recommend",
"highly recommended",
"amazing food",
"nice environment",
"food quality",
"nice food",
"bit pricey",
"excellent service",
"decent food",
"friendly staff",
"excellent food"
)) |>
ggplot(aes(x = beta,
y = fct_rev(topic))) +
geom_col(aes(fill = topic)) +
scale_fill_manual(
values = c("1. Recommended" = "#8ac926",
"2. Everything else" = "#ff595e")
) +
facet_wrap(~ term) +
guides(fill = "none") +
theme(strip.background = element_rect(fill = "black"),
axis.text.x = element_text(size = 7)) +
labs(y = "",
title = "Per-topic probabilities of general restaurant descriptors")
ggsave(here("plots", "google_general_descriptions_lda.png"),
width = 7, height = 4, units = "in", dpi = 300)
google_bigrams_topics |>
# Remember topic 1 is recommended
mutate(topic = ifelse(
topic == 1, "2. Everything else", "1. Recommended"
)) |>
filter(term %in% c(
"reasonable price",
"highly recommend",
"highly recommended",
"amazing food",
"nice environment",
"food quality",
"nice food",
"bit pricey",
"excellent service",
"decent food",
"friendly staff",
"excellent food"
)) |>
ggplot(aes(x = beta,
y = fct_rev(topic))) +
geom_col(aes(fill = topic)) +
scale_fill_manual(
values = c("1. Recommended" = "#8ac926",
"2. Everything else" = "#ff595e")
) +
facet_wrap(~ term) +
guides(fill = "none") +
theme(strip.background = element_rect(fill = "black"),
axis.text.x = element_text(size = 6)) +
labs(y = "",
title = "Per-topic probabilities of general restaurant descriptors")
google_bigrams_topics |>
# Remember topic 1 is recommended
mutate(topic = ifelse(
topic == 1, "2. Everything else", "1. Recommended"
)) |>
filter(term %in% c(
# Because they stayed long enough for dessert?
"ice cream",
"indian food",
"chinese restaurant",
"roast pork",
"salted egg",
"dim sum",
"nasi lemak",
"fried chicken",
"fried rice",
"japanese food",
"thai food",
"chicken rice",
"italian restaurant",
"western food",
"nasi kandar",
"char siew"
)) |>
ggplot(aes(x = beta,
y = fct_rev(topic))) +
geom_col(aes(fill = topic)) +
scale_fill_manual(
values = c("1. Recommended" = "#8ac926",
"2. Everything else" = "#ff595e")
) +
facet_wrap(~ term) +
guides(fill = "none") +
theme(strip.background = element_rect(fill = "black"),
axis.text.x = element_text(size = 7)) +
labs(title = "Per-topic probabilities of foods and cuisines",
subtitle = "Google reviews in the Klang Valley",
y = "")
ggsave(here("plots", "google_foods_lda.png"),
width = 8, height = 5, units = "in", dpi = 300)
google_bigrams_topics |>
# Remember topic 1 is recommended
mutate(topic = ifelse(
topic == 1, "2. Everything else", "1. Recommended"
)) |>
filter(term %in% c(
"reasonable price",
"highly recommend",
"highly recommended",
"amazing food",
"nice environment",
"food quality",
"nice food",
"bit pricey",
"excellent service",
"decent food",
"friendly staff",
"excellent food"
)) |>
ggplot(aes(x = beta,
y = fct_rev(topic))) +
geom_col(aes(fill = topic)) +
scale_fill_manual(
values = c("1. Recommended" = "#8ac926",
"2. Everything else" = "#ff595e")
) +
facet_wrap(~ term) +
guides(fill = "none") +
theme(strip.background = element_rect(fill = "black"),
axis.text.x = element_text(size = 6)) +
labs(y = "",
title = "Per-topic probabilities of general restaurant descriptors")
ggsave(here("plots", "google_general_descriptions_lda.png"),
width = 7, height = 4, units = "in", dpi = 300)
ggsave(here("plots", "google_general_descriptions_lda.png"),
width = 8, height = 5, units = "in", dpi = 300)
google_bigrams_topics |>
# Remember topic 1 is recommended
mutate(topic = ifelse(
topic == 1, "2. Everything else", "1. Recommended"
)) |>
filter(term %in% c(
# Because they stayed long enough for dessert?
"ice cream",
"indian food",
"chinese restaurant",
"roast pork",
"salted egg",
"dim sum",
"nasi lemak",
"fried chicken",
"fried rice",
"japanese food",
"thai food",
"chicken rice",
"italian restaurant",
"western food",
"nasi kandar",
"char siew"
)) |>
ggplot(aes(x = beta,
y = fct_rev(topic))) +
geom_col(aes(fill = topic)) +
scale_fill_manual(
values = c("1. Recommended" = "#8ac926",
"2. Everything else" = "#ff595e")
) +
facet_wrap(~ term) +
guides(fill = "none") +
theme(strip.background = element_rect(fill = "black"),
axis.text.x = element_text(size = 7)) +
labs(title = "Per-topic probabilities of foods and cuisines",
subtitle = "Google reviews in the Klang Valley",
y = "")
google_bigrams_topics |>
# Remember topic 1 is recommended
mutate(topic = ifelse(
topic == 1, "2. Everything else", "1. Recommended"
)) |>
filter(term %in% c(
# Because they stayed long enough for dessert?
"ice cream",
"indian food",
"chinese restaurant",
"roast pork",
"salted egg",
"dim sum",
"nasi lemak",
"fried chicken",
"fried rice",
"japanese food",
"thai food",
"chicken rice",
"italian restaurant",
"western food",
"nasi kandar",
"char siew"
)) |>
ggplot(aes(x = beta,
y = fct_rev(topic))) +
geom_col(aes(fill = topic)) +
scale_fill_manual(
values = c("1. Recommended" = "#8ac926",
"2. Everything else" = "#ff595e")
) +
facet_wrap(~ term) +
guides(fill = "none") +
theme(strip.background = element_rect(fill = "black"),
axis.text.x = element_text(size = 6)) +
labs(title = "Per-topic probabilities of foods and cuisines",
subtitle = "Google reviews in the Klang Valley",
y = "")
ggsave(here("plots", "google_foods_lda.png"),
width = 8, height = 5, units = "in", dpi = 300)
