{"title":"How useful are restaurant reviews? Google and Trip Advisor reviews in the Klang Valley, Malaysia","markdown":{"yaml":{"title":"How useful are restaurant reviews? Google and Trip Advisor reviews in the Klang Valley, Malaysia","subtitle":"Part two: Words","author":"Sean Ng","organization":"AIMdata","date-modified":"11 January 2026","execute":{"echo":false}},"headingText":"Commented out because I've written them into CSVs already","containsRefs":false,"markdown":"\n\n\n```{r setup, include = FALSE}\n\nknitr::opts_chunk$set(echo = FALSE, \n                      warning = FALSE, \n                      message = FALSE, \n                      fig.width = 9)\n\n\nlibrary(tidyverse)\nlibrary(here)\nlibrary(janitor)\nlibrary(scales)\nlibrary(tidytext)\nlibrary(widyr)\nlibrary(ggraph)\nlibrary(patchwork)\nlibrary(kableExtra)\nlibrary(fuzzyjoin)\nlibrary(viridis)\nlibrary(textdata)\nlibrary(stringr)\nlibrary(topicmodels)\n\n`%out%` <- Negate(`%in%`)\noptions(scipen = 100)\ntheme_set(theme_light())\nrange_wna <- function(x){(x-min(x, na.rm = TRUE))/(max(x, na.rm = TRUE)-min(x, na.rm = TRUE))}\n\nMode <- function(x) {\n  ux <- unique(x)\n  ux[which.max(tabulate(match(x, ux)))]\n}\n```\n\n\n```{r data}\n\ntrip_kl_cuisine <- read_csv(\"./data/trip_kl_cuisine.csv\")\n\ngoogle_kl_cuisine <- read_csv(\"./data/google_kl_cuisine.csv\")\n\ngoogle_rating_words <- google_kl_cuisine |> \n  select(rowid, rating, review) |> \n  unnest_tokens(word, review) |> \n  # mutate(word = SnowballC::wordStem(word, language = \"porter\")) |> \n  anti_join(stop_words, by = \"word\") |>\n  add_count(word, rating) \n\ntrip_rating_words <- trip_kl_cuisine |> \n  select(rowid, review, rating) |> \n  unnest_tokens(word, review) |> \n  # mutate(word = SnowballC::wordStem(word, language = \"porter\")) |> \n  anti_join(stop_words, by = \"word\") |>\n  add_count(word, rating) \n\n# So I don't keep on stressing the environment\n\n# google_rating_bigrams <- google_kl_cuisine |> \n#   select(rowid, rating, review, cuisine) |> \n#   unnest_tokens(bigram, review, token = \"ngrams\", n = 2) |> \n#   filter(!is.na(bigram)) |> \n#   add_count(bigram) |> \n#   separate(bigram, c(\"word1\", \"word2\"), sep = \" \") |> \n#   filter(!word1 %in% stop_words$word) |> \n#   filter(!word2 %in% stop_words$word) |> \n#   count(word1, word2, rating, sort = TRUE) |> \n#   unite(bigram, word1, word2, sep = \" \") |> \n#   bind_tf_idf(bigram, rating, n)\n  \n# trip_rating_bigrams <- trip_kl_cuisine |> \n#   select(rowid, rating, review, cuisine) |> \n#   unnest_tokens(bigram, review, token = \"ngrams\", n = 2) |> \n#   filter(!is.na(bigram)) |> \n#   add_count(bigram) |> \n#   separate(bigram, c(\"word1\", \"word2\"), sep = \" \") |> \n#   filter(!word1 %in% stop_words$word) |> \n#   filter(!word2 %in% stop_words$word) |> \n#   count(word1, word2, rating, sort = TRUE) |> \n#   unite(bigram, word1, word2, sep = \" \") |> \n#   bind_tf_idf(bigram, rating, n)  \n\ngoogle_rating_bigrams <- read_csv(\"./data/google_rating_bigrams.csv\") \n\n\ntrip_rating_bigrams <- read_csv(\"./data/trip_rating_bigrams.csv\") \n\n```\n\n## Words\n\nIn this second part of our analysis, we'll be doing some text analytics. To recap, we are using data scraped by [Ng Choon Khon](https://www.kaggle.com/datasets/choonkhonng/malaysia-restaurant-review-datasets) containing restaurant reviews in Malaysia on Google and Trip Advisor. Take a look at the [first part](https://aimdata-labs.github.io/google_trip_reviews_kl_site/) of this report to see the analysis of ratings as well as the dataset limitations. \n\nLet's start with an overview of the most common bigrams (two consecutive words) that appear in Google reviews, broken down by rating. \n\nWhilst there isn't too much in the plot below that is unexpected, it should be noted that our collective vocabulary, when it comes to restaurant reviews, is quite limited: \"nice food\" could indicate anything between three stars and five. Though we could argue that reviewers are being way too lenient by classing \"nice food\" as five stars. \n\nService, and not just food quality, is a major determinant in one-star ratings. This perhaps could be one of the reasons why fine dining restaurants have higher floors and ceilings for their ratings than more casual dining options. \n\n<br>\n\n```{r common-google-bigrams, fig.height=7}\ngoogle_rating_bigrams |> \n  mutate(rating = as.factor(rating)) |> \n  arrange(desc(n)) |> \n  group_by(rating) |> \n  slice(1:15) |> \n  ungroup() |> \n  ggplot(aes(x = n, y = reorder_within(bigram, n, rating))) + \n  geom_col(aes(fill = rating)) + \n  scale_fill_manual(values = c(\n    `1` = \"#e76f51\", \n    `2` = \"#f4a261\", \n    `3` = \"#e9c46a\", \n    `4` = \"#2a9d8f\", \n    `5` = \"#264653\"\n  )) +\n  facet_wrap(~ rating, scales = \"free\") +\n  scale_y_reordered() + \n  guides(fill = \"none\") + \n  theme(strip.background = element_rect(fill = \"black\")) + \n  labs(x = \"Count\", \n       y = \"\", \n       title = \"Most common bigrams by rating, Google reviews\")\n\nggsave(\"./plots/common_bigrams_google.png\", height = 5, width = 7, units = \"in\")\n  \n```\n\n<br>\n\nWhilst ratings might be very lenient overall -- cheapening a five-star rating -- we can at least say that there are definitely also qualitative differences between five-star and one-star reviews. \n\n\n<br><br><br>\n\n## One-star and five-star reviews of Chinese restaurants\n\nLet's dig a little deeper. As noted in the previous part, Chinese and Casual Western restaurants -- overall -- have the highest numbers of reviews and some of the lowest mean ratings across all cuisines. Let's take advantage of this by looking more closely at one single slice of the data. \n\nBelow, is a network graph of words used in one-star reviews of Chinese restaurants in the Klang Valley. The thickness of the lines between words indicates the number of times a word pairing has shown up in reviews. The transparency of the lines indicates the strength of the correlation between those two words. Key topics have been highlighted by me.  \n\nWe see a combination of quite undesirable experiences: smelly, pricey, not fresh, rude, long waits and poor quality. Additionally, service and the overall \"experience\" show up prominently as well (especially when it relates to events such as Chinese New Year, which often sees large banquets for friends, family and associates). \n\n\n<br>\n\n```{r}\nclean_common_foods <- function(tbl){\n  tbl |> \n    mutate(review = str_replace_all(review, \"Dim sum|Dim Sum|dim sum\", \"dimsum\"), \n         review = str_replace_all(review, \"Tom Yam|Tom Yum|Tom yam|Tom yum|tom yam|tom yum\", \"tomyum\"), \n         review = str_replace_all(review, \"Char Siew|Char siew|char siew\", \"charsiew\"), \n         review = str_replace_all(review, \"Hokkien mee|Hokkien Mee|hokkien mee\", \"hokkienmee\"), \n         review = str_replace_all(review, \"Roast Duck|Roast duck|roast duck\", \"roastduck\"),\n         review = str_replace_all(review, \"Fried Rice|Fried rice|fried rice\", \"friedrice\"), \n         review = str_replace_all(review, \"Roast pork|roast pork|Roast Pork\", \"roastpork\"), \n         review = str_replace_all(review, \"Mee hoon|mee hoon|Bee hoon|bee hoon|Mee Hoon|Bee Hoon\", \"beehoon\"), \n         review = str_replace_all(review, \"Bak kut teh|bak kut teh|Bak Kut Teh\", \"bakkutteh\"), \n         review = str_replace_all(review, \"char kuey teow|Char kuey teow|char koay teow|Char Kuey Teow\", \"charkueyteow\"),\n         review = str_replace_all(review, \"Hong Kong|hong kong\", \"hongkong\"), \n         review = str_replace_all(review, \"Siew yoke|siew yoke|siu yuk|Siu Yuk\", \"siewyoke\"), \n         review = str_replace_all(review, \"chee cheong fun|Chee cheong fun\", \"cheecheongfun\"), \n         review = str_replace_all(review, \"Kaya toast|kaya toast\", \"kaya toast\"), \n         review = str_replace_all(review, \"Din Tai Fung|din tai fung\", \"dintaifung\"), \n         review = str_replace_all(review, \"Salted egg|salted egg\", \"saltedegg\"), \n         review = str_replace_all(review, \"Kuala Lumpur|kuala lumpur|Kuala lumpur\", \"kl\"), \n         review = str_replace_all(review, \"Xiao long bao|xiao long bao|Xiao Long Bao\", \"xiaolongbao\"), \n         review = str_replace_all(review, \"Chicken rice|chicken rice|Chicken Rice\", \"chickenrice\"), \n         review = str_replace_all(review, \"Foreign workers|foreign workers\", \"foreignworkers\"))\n}\n```\n\n```{r one-star-network-graph, eval=FALSE}\n\n# Just going to load the result in the html, \n# So as to not run the network graph every time we render \n\ngoogle_chinese_1_star_network <- google_kl_cuisine |> \n  clean_common_foods() |>  \n  mutate(review_id = row_number()) |> \n  filter(cuisine == \"Chinese\" & rating == 1) |> \n  unnest_tokens(word, review) |> \n  anti_join(stop_words) |> \n  filter(str_detect(word, \"[a-z]\")) |> \n  add_count(word) |> \n  filter(n > 10) |> \n  pairwise_cor(word, review_id, sort = TRUE) |> \n  filter(correlation >= .15) |> \n  left_join(\n    google_kl_cuisine |> \n      clean_common_foods() |> \n      mutate(review_id = row_number()) |> \n      filter(cuisine == \"Chinese\" & rating == 1) |> \n      unnest_tokens(word, review) |> \n      anti_join(stop_words) |> \n      filter(str_detect(word, \"[a-z]\")) |> \n      add_count(word) |> \n      filter(n > 10) |> \n      pairwise_count(word, review_id, sort = TRUE), \n    by = c(\"item1\", \"item2\")\n  ) |> \n  igraph::graph_from_data_frame() |> \n  ggraph(layout = \"fr\") + \n  geom_edge_link(aes(alpha = correlation, edge_width = n), colour = \"#457b9d\", check_overlap = TRUE) +\n  scale_edge_width_continuous(range = c(.1, 4), trans = \"log10\") +\n  scale_alpha_continuous(range = c(0.01, 0.08)) +\n  geom_node_point(colour = \"#457b9d\", alpha = 0.2, size = .5) +\n  geom_node_text(aes(label = ifelse(name %in% \n                                        c(\"waited\", \"service\", \"experience\", \n                                          \"price\", \"quality\", \"fresh\", \n                                          \"tasted\", \"disappointing\"),\n                                      str_to_title(name),\n                                      \"\")), \n                 size = 3.5, \n                 alpha = .9, \n                 colour = \"#00afb9\", \n                 fontface = \"bold\") +\n  geom_node_text(aes(label = name), size = 3.1, alpha = .4, \n                 colour = \"#caf0f8\") + \n  theme(legend.position = \"none\", \n        plot.caption = element_text(hjust = .5, colour = \"#219ebc\"), \n        panel.background = element_rect(fill = \"#03071e\"), \n        plot.background = element_rect(fill = \"#1b263b\"), \n        plot.title = element_text(colour = \"#219ebc\"), \n        plot.subtitle = element_text(colour = \"#219ebc\", size = 10)) + \n  labs(title = \"Network graph of One-star Chinese Restaurant Google Review Descriptions\", \n       subtitle = \"Line thickness indicates number of events involving those words, line transparency indicates the correlation between words. Key topics highlighted.\", \n       caption = \"Source: maps.google.com; Ng Choon Khon\")\n\nggsave(here(\"plots\", \"google_chinese_1_star_network_graph.png\"), \n       width = 10, height = 6.5, units = \"in\", dpi = 300)\n```\n\n\n[![Click image for full size](./plots/google_chinese_1_star_network_graph.png)](https://raw.githubusercontent.com/aimdata-labs/google_trip_reviews_kl_site/main/plots/google_chinese_1_star_network_graph.png)\n\n<br>\n\nLet's look at the flipside and see what reviewers said about five-star dining experiences in Chinese restaurants. As with the plot above, line thickness shows the frequency of the word pair and the transparency indicates the correlation. Key topics once again highlighted by me. \n\nWhilst five-star reviews of Chinese restaurants are much more numerous, we don't necessarily see a greater variety of expression (just more foods mentioned), we see that points of failure are very similar to points of success for Chinese restaurants: freshness, friendly service, waiting times and reasonable pricing. We also see a key phrase that we will delve into in a later section: \"highly recommended\". \n\n<br>\n\n```{r google-five-star-chinese-network, eval=FALSE}\ngoogle_chinese_5_star_network <- google_kl_cuisine |> \n  clean_common_foods() |>  \n  mutate(review_id = row_number()) |> \n  filter(cuisine == \"Chinese\" & rating == 5) |> \n  unnest_tokens(word, review) |> \n  anti_join(stop_words) |> \n  filter(str_detect(word, \"[a-z]\")) |> \n  add_count(word) |> \n  filter(n > 20) |> \n  pairwise_cor(word, review_id, sort = TRUE) |> \n  filter(correlation >= .15) |> \n  left_join(\n    google_kl_cuisine |> \n      clean_common_foods() |> \n      mutate(review_id = row_number()) |> \n      filter(cuisine == \"Chinese\" & rating == 5) |> \n      unnest_tokens(word, review) |> \n      anti_join(stop_words) |> \n      filter(str_detect(word, \"[a-z]\")) |> \n      add_count(word) |> \n      filter(n > 20) |> \n      pairwise_count(word, review_id, sort = TRUE), \n    by = c(\"item1\", \"item2\")\n  ) |> \n  igraph::graph_from_data_frame() |> \n  ggraph(layout = \"fr\") + \n  geom_edge_link(aes(alpha = correlation, edge_width = n), colour = \"#457b9d\", check_overlap = TRUE) +\n  scale_edge_width_continuous(range = c(.1, 4), trans = \"log10\") +\n  scale_alpha_continuous(range = c(0.01, 0.08)) +\n  geom_node_point(colour = \"#457b9d\", alpha = 0.2, size = .5) +\n  geom_node_text(aes(label = ifelse(name %in% \n                                        c(\"peak\", \"service\", \"experience\", \n                                          \"price\", \"pork\", \"fresh\", \"fish\",\n                                          \"tasted\", \"recommended\", \"friendly\", \"crispy\"),\n                                      str_to_title(name),\n                                      \"\")), \n                 size = 3.2, \n                 alpha = .9, \n                 colour = \"#00afb9\", \n                 fontface = \"bold\") +\n  geom_node_text(aes(label = name), size = 3.1, alpha = .4, \n                 colour = \"#caf0f8\") + \n  theme(legend.position = \"none\", \n        plot.caption = element_text(hjust = .5, colour = \"#219ebc\"), \n        panel.background = element_rect(fill = \"#03071e\"), \n        plot.background = element_rect(fill = \"#1b263b\"), \n        plot.title = element_text(colour = \"#219ebc\"), \n        plot.subtitle = element_text(colour = \"#219ebc\", size = 10)) + \n  labs(title = \"Network graph of Five-star Chinese Restaurant Google Review Descriptions\", \n       subtitle = \"Line thickness indicates number of reviews involving those words, line transparency indicates the correlation between words. Key topics highlighted.\", \n       caption = \"Source: maps.google.com; Ng Choon Khon\")\n\nggsave(here(\"plots\", \"google_chinese_5_star_network_graph.png\"), \n       width = 10, height = 6.5, units = \"in\", dpi = 300)\n```\n\n\n[![Click image for full size](./plots/google_chinese_5_star_network_graph.png)](https://raw.githubusercontent.com/aimdata-labs/google_trip_reviews_kl_site/main/plots/google_chinese_5_star_network_graph.png)\n\n<br>\n\nAs a whole, Chinese restaurants seem to be judged by Google reviewers on quite a consistent set of criteria. \n\n<br><br><br>\n\n\n\n## Topic modelling and expectations\n\nSince reviews are so heavily skewed towards 5 stars, let's use topic modelling to break down reviews into just two groups which I have termed **Recommended** and **Everything else**. This will hopefully sort out all the five- and four-star reviews that are not actual recommendations. \n\nBelow, the per-topic-per-word probabilities of bigrams in the Google dataset have been plotted. The x-axes indicate the probability of each bigram appearing in reviews under each topic. \n\nBigrams have been used here because individual words are not as informative (\"service\" vs. \"excellent service\"). As mentioned, our collective vocabulary is quite limited when it comes to food: \"fine dining\" is used both as a compliment and as a mocking pejorative. \n\n<br> \n\n```{r lda, fig.height=6}\ngoogle_bigrams_dtm <- google_rating_bigrams |>  \n  cast_dtm(rating, bigram, n)\n\ngoogle_bigrams_lda <- \n  LDA(google_bigrams_dtm, k = 2, control = list(seed = 133))\n\ngoogle_bigrams_topics <- tidy(google_bigrams_lda, matrix = \"beta\")\n\ngoogle_bigrams_topics |> \n  # Remember topic 1 is recommended \n  mutate(topic = ifelse(\n    topic == 1, \"2. Everything else\", \"1. Recommended\"\n  )) |> \n  group_by(topic) |> \n  slice_max(beta, n = 20) |> \n  ungroup() |> \n  arrange(topic, -beta) |> \n  ggplot(aes(x = beta, y = reorder_within(term, beta, topic), fill = topic)) + \n  geom_col() + \n  scale_fill_manual(\n    values = c(\"1. Recommended\" = \"#8ac926\", \n               \"2. Everything else\" = \"#ff595e\")\n  ) +\n  facet_wrap(~ topic, scales = \"free_y\") + \n  scale_y_reordered() + \n  labs(title = \"20 most-probable bigrams per topic\", \n       subtitle = \"From Google reviews of restaurants in the Klang Valley.\\nOnly shows bigrams that occur more than 20 times in the dataset.\", \n       y = \"\", \n       x = \"Per-topic probability (beta)\") + \n  guides(fill = \"none\") +\n  theme(strip.background = element_rect(fill = \"black\"), \n        strip.text = element_text(size = 10, face = \"bold\"))\n\nggsave(here(\"plots\", \"google_lda.png\"), \n       width = 7, height = 4, units = \"in\", dpi = 300)\n```\n\n\n<br>\n\nLet's take a closer look at individual bigrams. We'll start with some of the most common foods that show up in Google reviews. With the plots below, the important thing is to compare the relative per-topic probabilities of each of the bigrams that occur in each topic i.e. how probable it is that a particular food will be in a \"Recommended\" review.   \n\nRestaurants seem to have the worst performance with chicken rice, fried rice, char siew, dim sum and roast pork. Amongst cuisines, Indian and Italian food seem to be recommended more often than not; the opposite is true for Chinese restaurants. \n\nPerhaps reviewers are less generous with foods they are familiar with. I know I am: I've had extremely good char siew and roast pork (that can be easily and readily accessed) and can be uncharitable and judgemental when they are done poorly. \n\nGiven the low percentage of reviews that use Malay that we mentioned in the previous part, many of the most common foods here are not halal at all. This underlines that the demographics of Google reviewers (who are already much more likely to be locals than Trip Advisor reviewers) are skewed heavily towards minorities. \n\n<br>\n\n```{r common-foods-lda, fig.height=6.5}\n\ngoogle_bigrams_topics |> \n   # Remember topic 1 is recommended \n  mutate(topic = ifelse(\n    topic == 1, \"2. Everything else\", \"1. Recommended\"\n  )) |> \n  filter(term %in% c(\n    # Because they stayed long enough for dessert?\n    \"ice cream\",\n    \"indian food\", \n    \"chinese restaurant\", \n    \"roast pork\", \n    \"salted egg\", \n    \"dim sum\", \n    \"nasi lemak\",  \n    \"fried chicken\", \n    \"fried rice\", \n    \"japanese food\", \n    \"thai food\", \n    \"chicken rice\", \n    \"italian restaurant\", \n    \"western food\",\n    \"nasi kandar\", \n    \"char siew\"\n  )) |> \n  ggplot(aes(x = beta, \n             y = fct_rev(topic))) + \n  geom_col(aes(fill = topic)) + \n  scale_fill_manual(\n    values = c(\"1. Recommended\" = \"#8ac926\", \n               \"2. Everything else\" = \"#ff595e\")\n  ) +\n  facet_wrap(~ term) + \n  guides(fill = \"none\") + \n  theme(strip.background = element_rect(fill = \"black\"), \n        axis.text.x = element_text(size = 6)) + \n  labs(title = \"Per-topic probabilities of foods and cuisines\", \n       subtitle = \"Google reviews in the Klang Valley\", \n       y = \"\")\n\nggsave(here(\"plots\", \"google_foods_lda.png\"), \n       width = 8, height = 5, units = \"in\", dpi = 300)\n```\n\n<br>\n\nThe next plot below shows some of the most common general descriptors (not specific to food) of restaurants. \n\n\"Friendly staff\" and \"nice food\", more often than not, are complimentary terms, but do by no means guarantee a positive review or a recommendation. Likewise, having a \"nice environment\" is important, but nowhere as important as having \"excellent food\" or \"excellent service\". \n\nBringing up \"food quality\" is more likely a pejorative than it is not. If service is very important to you, the terms \"excellent service\" and \"friendly staff\" are good distinguishers in Google reviews. Unfortunately, a lot of people to whom service is very important are unable to acknowledge this fact about themselves. \n\n<br>\n\n```{r general-descriptors-lda, fig.height = 5.5}\ngoogle_bigrams_topics |> \n   # Remember topic 1 is recommended \n  mutate(topic = ifelse(\n    topic == 1, \"2. Everything else\", \"1. Recommended\"\n  )) |> \n  filter(term %in% c(\n    \"reasonable price\",\n    \"highly recommend\", \n    \"highly recommended\", \n    \"amazing food\", \n    \"nice environment\", \n    \"food quality\", \n    \"nice food\",  \n    \"bit pricey\", \n    \"excellent service\", \n    \"decent food\", \n    \"friendly staff\", \n    \"excellent food\"\n  )) |> \n  ggplot(aes(x = beta, \n             y = fct_rev(topic))) + \n  geom_col(aes(fill = topic)) + \n  scale_fill_manual(\n    values = c(\"1. Recommended\" = \"#8ac926\", \n               \"2. Everything else\" = \"#ff595e\")\n  ) +\n  facet_wrap(~ term) + \n  guides(fill = \"none\") + \n  theme(strip.background = element_rect(fill = \"black\"), \n        axis.text.x = element_text(size = 6)) +\n  labs(y = \"\", \n       title = \"Per-topic probabilities of general restaurant descriptors\")\n\nggsave(here(\"plots\", \"google_general_descriptions_lda.png\"), \n       width = 8, height = 5, units = \"in\", dpi = 300)\n```\n\n\n<br>\n\nHowever, this isn't all that applicable to real life, since you can't search all reviews across all restaurants for keywords. Google Maps does not work the same way Google Search does (at least before it became useless). You can only search for keywords within the reviews of a single restaurant.\n\nThis is another point in favour of online reviews just being a marketing ploy. Not to say that marketing ploys cannot be informative, just that their information is compromised. \n\nThere is, however, one keyword search that does work. \n\n\n<br><br><br>\n\n## \"Highly recommended restaurant\" (sic)\n\n<br>\n\n[![What directory mode looks like](./plots/directory_mode.png)](https://raw.githubusercontent.com/aimdata-labs/google_trip_reviews_kl_site/main/plots/directory_mode.png)\n\n<br>\n\nType in \"highly recommended restaurant\" (sic) into Google Maps (or \"recommended restaurant\" on iOS) and see what you get. I get a list of some pretty good restaurants, with no photos. I don't agree with every entry, but this \"directory\" mode is probably the best (but still flawed) performance I've seen from Google Maps in a long time. \n\nNow, this may seem like we've somehow gamed the system, but to bring us back down to Earth, this list of highly recommended restaurants is very much part of the play, according to Gemini (Google Maps Support has no real answers on this topic): \n\n>When you type \"highly recommend restaurant\" into the search bar, Google Maps interprets those words as keywords rather than a command. Instead of looking for a specific badge, the app uses its algoritm to build a list based on several \"trust signals.\"\n\n>1. Keyword matching (SEO) [...] \"This place is highly recommended\" [...]\n>2. High \"Prominence\" Scores. Google defines \"Prominence\" as how well-known or important a business is. When you ass \"highly recommended\" to your search, the algorithm prioritizes restaurants with: high volume of 4.5+ star ratings. Mentions on \"Best Of\" lists [...]. Heavy foot traffic (Google tracks how many people acturally visit the location). \n> 3. The \"Top Rated\" Filter. By using that specific phrase, you are essentially triggering Google's built-in Rating Filter. Google will automatically filter out businesses with low ratings (usually anything below a 4.0) [...].\n>4. Machine Learning & \"Your Match\"[...]\n\nThey have also included a \"Review Snippet\" so you can tell why a particular restaurant made it to this list. Also note from these screenshots that the actual rating is not that important: restaurants are in the range of 4.0 to 5.0, but that's about it, as if Google also knows that the mean rating is not a particularly useful metric. \n\nConversely, when you type in \"highly recommended restaurants\" or just \"highly recommended\", \n\n>the list looks different—often featuring large, swipeable photos—because Google switches from a standard \"directory\" mode to \"Discovery Mode.\" Google knows that when you use words like \"highly recommended,\" you aren't just looking for an address; you’re looking for an experience. \n\nWhen not in \"directory\" mode, the factors that Google Maps takes into account are not desirable (at least by me):\n\n>1. Visual \"proof\" of recommendation. Google's AI specifically pulls photos it identifies as \"high quality\"\n>2. The \"Discover Through Photos\" feature. [...] When you use subjective search terms (like *highly recommended*, *beautiful*, *cozy*), Google assumes yuou want to browse visually. \n>3. AI Dish Matching\n>4. High Engagement Signals. [...] Google rewards businesses that have high engagement. If a restaurant has 1,000 photos uploaded by customers, Google has a huge library to make the search result look more attractive and \"trustworthy\" to you. \n\nThis is likely why searching for \"best restaurant\" yields such poor results. You're probably getting results that are more easily manipulated and influenced i.e. upload a review and a photo for a free ice cream. \n\nFor reference, Google Maps's base algorithm (which is used when you type in \"restaurants in area X\") relies on: \n\n>1. Distance\n>2. Relevance. [...] Category matching, [...] Menu and Attributes, [...] Open Now\n>3. Prominence. [...] Review velocity [...] how ofren peole are leaving reviews. [...] Web presence [...]. SEO strength: the ranking of the restaurant's actual website also matters. \n>4. Personalisation\n\nBut back to \"directory\" mode: even though you get more satisfactory results, bear in mind that the Google rating has already been taken into account twice: ratings are part of how Google calculates \"Prominence\" and the algorithm also applies a rating filter. \n\nThat it does not solely act like a keyword is likely to prevent more manipulation and SEO shenanigans. So far, I've only been able to trigger **Directory mode** with this one phrase. What else can trigger **Directory mode** on Google Maps? In these trying times, could some variation of \"reasonable price restaurant\" work?\n\n\n\n<br><br><br>\n\n## Conclusions part two\n\nOnline reviews are part of a highly-gamified ecosystem. Standard searches will leave you at the mercy of content pushed by SEO, influencers and black-box algorithms. \n\nWhilst there are ways around this, like directory mode, ultimately, the system fundamentally does not seem to be geared towards the needs of customers (especially not if you need tips and tricks just to get passable performance). Customisation occurs mostly on the back-end: there is no way to tell Google what ypu consider relevant to you. Instead, they glean this from your online footprint, believing you will unconsciously betray your wants and needs to them.\n\nTherein lies the rub. Just because you know my sex, my income, whether or not I'm pregnant, and can put me into one of their numerous categories and clusters does not mean you know me as a person, or even as a customer. You could argue that this widespread data theft might not lead to the best results for one person, but that it is used to produce apps and algorithms that are able to serve the majority well. \n\nBut I do not think Google Reviews serve the majority well. This has to do with the fact that online reviews are not solely about food. It is an \"experience\" that must be upsold and marketed to you. In trying to be Instagram, they have forgotten how to be a map, a directory. The wanton privileging of photos and influencer reels is not helpful when I just want a good meal. \n\nSo, are online reviews useful? Eh. 2/5. \n\n\n\n\n\n<br><br><br>\n\n\n\n## Appendices\n\nEven within the much more verbose reviews on Trip Advisor, we still see that the language used is still very limited, irrespective of rating. \n\n<br>\n\n```{r fig.height=7}\ntrip_rating_bigrams |> \n  filter(bigram %out% c(\"kuala lumpur\")) |> \n  mutate(rating = as.factor(rating)) |> \n  arrange(desc(n)) |> \n  group_by(rating) |> \n  slice(1:15) |> \n  ungroup() |> \n  ggplot(aes(x = n, y = reorder_within(bigram, n, rating))) + \n  geom_col(aes(fill = rating)) + \n  scale_fill_manual(values = c(\n    `1` = \"#e76f51\", \n    `2` = \"#f4a261\", \n    `3` = \"#e9c46a\", \n    `4` = \"#2a9d8f\", \n    `5` = \"#264653\"\n  )) +\n  facet_wrap(~ rating, scales = \"free\") +\n  scale_y_reordered() + \n  guides(fill = \"none\") + \n  theme(strip.background = element_rect(fill = \"black\")) + \n  labs(x = \"Count\", \n       y = \"\", \n       title = \"Most common bigrams by rating, Trip Advisor reviews\")\n  \n```\n<br>\n\nJust as an interesting point, when we look at one-star Trip Advisor reviews for Casual Western restaurants, we see that the words \"hot\" and \"cold\" are quite prominent. \n\nI believe this has to do with underprepared and/or improperly microwaved food. Microwaved food, often bought from a food service or brought from a central kitchen, is one of the sad curses of modern dining. Waves of consolidation up and down the restaurant supply chain have left all hawkers in Singapore with one choice of yellow mee or only one type of bee hoon. In America, US Foods and Sysco have completely sewn up the supply chain, leading to all jalapeño poppers and mozzarella sticks coast-to-coast to be the exact same. \n\nWhilst that level of corporate consolidation has not yet occurred in Malaysia, the process is nevertheless underway. This is something we must guard against and prevent, as homogeneity isn't even prized in prison meals. \n\n<br>\n\n[![Click image for full size](./plots/trip_casual_western_1_star_network_graph.png)](https://raw.githubusercontent.com/aimdata-labs/google_trip_reviews_kl_site/main/plots/trip_casual_western_1_star_network_graph.png)\n\n```{r eval=FALSE}\ntrip_casual_western_1_star_network <- trip_kl_cuisine |> \n  mutate(review_id = row_number()) |> \n  filter(cuisine == \"Casual Western\" & rating == 1) |> \n  unnest_tokens(word, review) |> \n  anti_join(stop_words) |> \n  filter(str_detect(word, \"[a-z]\")) |> \n  add_count(word) |> \n  filter(n > 20) |> \n  pairwise_cor(word, review_id, sort = TRUE) |> \n  filter(correlation >= .18) |> \n  left_join(\n    trip_kl_cuisine |> \n      mutate(review_id = row_number()) |> \n      filter(cuisine == \"Casual Western\" & rating == 1) |> \n      unnest_tokens(word, review) |> \n      anti_join(stop_words) |> \n      filter(str_detect(word, \"[a-z]\")) |> \n      add_count(word) |> \n      filter(n > 20) |> \n      pairwise_count(word, review_id, sort = TRUE), \n    by = c(\"item1\", \"item2\")\n  ) |> \n  igraph::graph_from_data_frame() |> \n  ggraph(layout = \"fr\") + \n  geom_edge_link(aes(alpha = correlation, edge_width = n), colour = \"#457b9d\", check_overlap = TRUE) +\n  scale_edge_width_continuous(range = c(.1, 4), trans = \"log10\") +\n  scale_alpha_continuous(range = c(0.01, 0.08)) +\n  geom_node_point(colour = \"#457b9d\", alpha = 0.2, size = .5) +\n  geom_node_text(aes(label = ifelse(name %in% \n                                        c(\"wait\", \"hot\", \"cold\", \n                                          \"service\", \"experience\", \"food\", \n                                          \"serve\"),\n                                    name,\n                                      \"\")), \n                 size = 3.1, \n                 alpha = .9, \n                 colour = \"#00afb9\", \n                 fontface = \"bold\") +\n  geom_node_text(aes(label = name), size = 3.1, alpha = .4, \n                 colour = \"#caf0f8\") + \n  theme(legend.position = \"none\", \n        plot.caption = element_text(hjust = .5, colour = \"#219ebc\"), \n        panel.background = element_rect(fill = \"#03071e\"), \n        plot.background = element_rect(fill = \"#1b263b\"), \n        plot.title = element_text(colour = \"#219ebc\"), \n        plot.subtitle = element_text(colour = \"#219ebc\", size = 10)) + \n  labs(title = \"Network graph of One-star Casual Western Restaurant Trip Advisor Review Descriptions\", \n       subtitle = \"Line thickness indicates number of events involving those words, line transparency indicates the correlation between words. Key topics highlighted.\", \n       caption = \"Source: TripAdvisor; Ng Choon Khon\")\n\nggsave(here(\"plots\", \"trip_casual_western_1_star_network_graph.png\"), \n       width = 10, height = 6.5, units = \"in\", dpi = 300)\n```\n\n<br>\n\n\"Cold\" shows up again under one-star Google reviews of Casual Western restaurants, indicating poor attention to detail and/or rushed food preparation. Though it doesn't necessarily point towards microwaved foods. \n\nAs a side note (in an appendix), there is a way to microwave food well -- apparently using the defrost setting achieves the most even cooking. \n\n<br>\n\n[![Click image for full size](./plots/google_casual_western_1_star_network_graph.png)](https://raw.githubusercontent.com/aimdata-labs/google_trip_reviews_kl_site/main/plots/google_casual_western_1_star_network_graph.png)\n\n```{r eval=FALSE}\ngoogle_casual_western_1_star_network <- google_kl_cuisine |> \n  mutate(review_id = row_number()) |> \n  filter(cuisine == \"Casual Western\" & rating == 1) |> \n  unnest_tokens(word, review) |> \n  anti_join(stop_words) |> \n  filter(str_detect(word, \"[a-z]\")) |> \n  add_count(word) |> \n  filter(n > 15) |> \n  pairwise_cor(word, review_id, sort = TRUE) |> \n  filter(correlation >= .12) |> \n  left_join(\n    google_kl_cuisine |> \n      mutate(review_id = row_number()) |> \n      filter(cuisine == \"Casual Western\" & rating == 1) |> \n      unnest_tokens(word, review) |> \n      anti_join(stop_words) |> \n      filter(str_detect(word, \"[a-z]\")) |> \n      add_count(word) |> \n      filter(n > 15) |> \n      pairwise_count(word, review_id, sort = TRUE), \n    by = c(\"item1\", \"item2\")\n  ) |> \n  igraph::graph_from_data_frame() |> \n  ggraph(layout = \"fr\") + \n  geom_edge_link(aes(alpha = correlation, edge_width = n), colour = \"#457b9d\", check_overlap = TRUE) +\n  scale_edge_width_continuous(range = c(.1, 4), trans = \"log10\") +\n  scale_alpha_continuous(range = c(0.01, 0.08)) +\n  geom_node_point(colour = \"#457b9d\", alpha = 0.2, size = .5) +\n  geom_node_text(aes(label = ifelse(name %in% \n                                        c(\"wait\", \"hot\", \"cold\", \n                                          \"service\", \"quality\", \"rude\",\n                                          \"serve\", \"taste\", \"price\"),\n                                    name,\n                                      \"\")), \n                 size = 3.1, \n                 alpha = .9, \n                 colour = \"#00afb9\", \n                 fontface = \"bold\") +\n  geom_node_text(aes(label = name), size = 3.1, alpha = .4, \n                 colour = \"#caf0f8\") + \n  theme(legend.position = \"none\", \n        plot.caption = element_text(hjust = .5, colour = \"#219ebc\"), \n        panel.background = element_rect(fill = \"#03071e\"), \n        plot.background = element_rect(fill = \"#1b263b\"), \n        plot.title = element_text(colour = \"#219ebc\"), \n        plot.subtitle = element_text(colour = \"#219ebc\", size = 10)) + \n  labs(title = \"Network graph of One-star Casual Western Restaurant Google Review Descriptions\", \n       subtitle = \"Line thickness indicates number of events involving those words, line transparency indicates the correlation between words. Key topics highlighted.\", \n       caption = \"Source: maps.google.com; Ng Choon Khon\")\n\nggsave(here(\"plots\", \"google_casual_western_1_star_network_graph.png\"), \n       width = 10, height = 6.5, units = \"in\", dpi = 300)\n```\n\n<br>\n\nIn contrast, when we look at five-star reviews of Casual Western restaurants on Trip Advisor, we see a slew of foods which would suffer if the preparation were lacking: steaks, ribs, and even sausages would suffer from a microwave. \n\n<br>\n\n[![Click image for full size](./plots/google_casual_western_1_star_network_graph.png)](https://raw.githubusercontent.com/aimdata-labs/google_trip_reviews_kl_site/main/plots/google_casual_western_1_star_network_graph.png)\n\n```{r eval=FALSE}\ntrip_casual_western_5_star_network <- trip_kl_cuisine |> \n  mutate(review_id = row_number()) |> \n  filter(cuisine == \"Casual Western\" & rating == 5) |> \n  unnest_tokens(word, review) |> \n  anti_join(stop_words) |> \n  filter(str_detect(word, \"[a-z]\")) |> \n  add_count(word) |> \n  filter(n > 20) |> \n  pairwise_cor(word, review_id, sort = TRUE) |> \n  filter(correlation >= .18) |> \n  left_join(\n    trip_kl_cuisine |> \n      mutate(review_id = row_number()) |> \n      filter(cuisine == \"Casual Western\" & rating == 5) |> \n      unnest_tokens(word, review) |> \n      anti_join(stop_words) |> \n      filter(str_detect(word, \"[a-z]\")) |> \n      add_count(word) |> \n      filter(n > 20) |> \n      pairwise_count(word, review_id, sort = TRUE), \n    by = c(\"item1\", \"item2\")\n  ) |> \n  igraph::graph_from_data_frame() |> \n  ggraph(layout = \"fr\") + \n  geom_edge_link(aes(alpha = correlation, edge_width = n), colour = \"#457b9d\", check_overlap = TRUE) +\n  scale_edge_width_continuous(range = c(.1, 4), trans = \"log10\") +\n  scale_alpha_continuous(range = c(0.01, 0.08)) +\n  geom_node_point(colour = \"#457b9d\", alpha = 0.2, size = .5) +\n  geom_node_text(aes(label = ifelse(name %in% \n                                        c(\"friendly\", \"ribs\", \"steak\", \n                                          \"sausage\", \"highly\", \"beer\"),\n                                    name,\n                                      \"\")), \n                 size = 3.1, \n                 alpha = .9, \n                 colour = \"#00afb9\", \n                 fontface = \"bold\") +\n  geom_node_text(aes(label = name), size = 3.1, alpha = .4, \n                 colour = \"#caf0f8\") + \n  theme(legend.position = \"none\", \n        plot.caption = element_text(hjust = .5, colour = \"#219ebc\"), \n        panel.background = element_rect(fill = \"#03071e\"), \n        plot.background = element_rect(fill = \"#1b263b\"), \n        plot.title = element_text(colour = \"#219ebc\"), \n        plot.subtitle = element_text(colour = \"#219ebc\", size = 10)) + \n  labs(title = \"Network graph of One-star Casual Western Restaurant Trip Advisor Review Descriptions\", \n       subtitle = \"Line thickness indicates number of events involving those words, line transparency indicates the correlation between words. Key topics highlighted.\", \n       caption = \"Source: TripAdvisor; Ng Choon Khon\")\n\nggsave(here(\"plots\", \"trip_casual_western_5_star_network_graph.png\"), \n       width = 10, height = 6.5, units = \"in\", dpi = 300)\n    \n```\n\n\n\n\n\n\n\n","srcMarkdownNoYaml":"\n\n\n```{r setup, include = FALSE}\n\nknitr::opts_chunk$set(echo = FALSE, \n                      warning = FALSE, \n                      message = FALSE, \n                      fig.width = 9)\n\n\nlibrary(tidyverse)\nlibrary(here)\nlibrary(janitor)\nlibrary(scales)\nlibrary(tidytext)\nlibrary(widyr)\nlibrary(ggraph)\nlibrary(patchwork)\nlibrary(kableExtra)\nlibrary(fuzzyjoin)\nlibrary(viridis)\nlibrary(textdata)\nlibrary(stringr)\nlibrary(topicmodels)\n\n`%out%` <- Negate(`%in%`)\noptions(scipen = 100)\ntheme_set(theme_light())\nrange_wna <- function(x){(x-min(x, na.rm = TRUE))/(max(x, na.rm = TRUE)-min(x, na.rm = TRUE))}\n\nMode <- function(x) {\n  ux <- unique(x)\n  ux[which.max(tabulate(match(x, ux)))]\n}\n```\n\n\n```{r data}\n\ntrip_kl_cuisine <- read_csv(\"./data/trip_kl_cuisine.csv\")\n\ngoogle_kl_cuisine <- read_csv(\"./data/google_kl_cuisine.csv\")\n\ngoogle_rating_words <- google_kl_cuisine |> \n  select(rowid, rating, review) |> \n  unnest_tokens(word, review) |> \n  # mutate(word = SnowballC::wordStem(word, language = \"porter\")) |> \n  anti_join(stop_words, by = \"word\") |>\n  add_count(word, rating) \n\ntrip_rating_words <- trip_kl_cuisine |> \n  select(rowid, review, rating) |> \n  unnest_tokens(word, review) |> \n  # mutate(word = SnowballC::wordStem(word, language = \"porter\")) |> \n  anti_join(stop_words, by = \"word\") |>\n  add_count(word, rating) \n\n# Commented out because I've written them into CSVs already\n# So I don't keep on stressing the environment\n\n# google_rating_bigrams <- google_kl_cuisine |> \n#   select(rowid, rating, review, cuisine) |> \n#   unnest_tokens(bigram, review, token = \"ngrams\", n = 2) |> \n#   filter(!is.na(bigram)) |> \n#   add_count(bigram) |> \n#   separate(bigram, c(\"word1\", \"word2\"), sep = \" \") |> \n#   filter(!word1 %in% stop_words$word) |> \n#   filter(!word2 %in% stop_words$word) |> \n#   count(word1, word2, rating, sort = TRUE) |> \n#   unite(bigram, word1, word2, sep = \" \") |> \n#   bind_tf_idf(bigram, rating, n)\n  \n# trip_rating_bigrams <- trip_kl_cuisine |> \n#   select(rowid, rating, review, cuisine) |> \n#   unnest_tokens(bigram, review, token = \"ngrams\", n = 2) |> \n#   filter(!is.na(bigram)) |> \n#   add_count(bigram) |> \n#   separate(bigram, c(\"word1\", \"word2\"), sep = \" \") |> \n#   filter(!word1 %in% stop_words$word) |> \n#   filter(!word2 %in% stop_words$word) |> \n#   count(word1, word2, rating, sort = TRUE) |> \n#   unite(bigram, word1, word2, sep = \" \") |> \n#   bind_tf_idf(bigram, rating, n)  \n\ngoogle_rating_bigrams <- read_csv(\"./data/google_rating_bigrams.csv\") \n\n\ntrip_rating_bigrams <- read_csv(\"./data/trip_rating_bigrams.csv\") \n\n```\n\n## Words\n\nIn this second part of our analysis, we'll be doing some text analytics. To recap, we are using data scraped by [Ng Choon Khon](https://www.kaggle.com/datasets/choonkhonng/malaysia-restaurant-review-datasets) containing restaurant reviews in Malaysia on Google and Trip Advisor. Take a look at the [first part](https://aimdata-labs.github.io/google_trip_reviews_kl_site/) of this report to see the analysis of ratings as well as the dataset limitations. \n\nLet's start with an overview of the most common bigrams (two consecutive words) that appear in Google reviews, broken down by rating. \n\nWhilst there isn't too much in the plot below that is unexpected, it should be noted that our collective vocabulary, when it comes to restaurant reviews, is quite limited: \"nice food\" could indicate anything between three stars and five. Though we could argue that reviewers are being way too lenient by classing \"nice food\" as five stars. \n\nService, and not just food quality, is a major determinant in one-star ratings. This perhaps could be one of the reasons why fine dining restaurants have higher floors and ceilings for their ratings than more casual dining options. \n\n<br>\n\n```{r common-google-bigrams, fig.height=7}\ngoogle_rating_bigrams |> \n  mutate(rating = as.factor(rating)) |> \n  arrange(desc(n)) |> \n  group_by(rating) |> \n  slice(1:15) |> \n  ungroup() |> \n  ggplot(aes(x = n, y = reorder_within(bigram, n, rating))) + \n  geom_col(aes(fill = rating)) + \n  scale_fill_manual(values = c(\n    `1` = \"#e76f51\", \n    `2` = \"#f4a261\", \n    `3` = \"#e9c46a\", \n    `4` = \"#2a9d8f\", \n    `5` = \"#264653\"\n  )) +\n  facet_wrap(~ rating, scales = \"free\") +\n  scale_y_reordered() + \n  guides(fill = \"none\") + \n  theme(strip.background = element_rect(fill = \"black\")) + \n  labs(x = \"Count\", \n       y = \"\", \n       title = \"Most common bigrams by rating, Google reviews\")\n\nggsave(\"./plots/common_bigrams_google.png\", height = 5, width = 7, units = \"in\")\n  \n```\n\n<br>\n\nWhilst ratings might be very lenient overall -- cheapening a five-star rating -- we can at least say that there are definitely also qualitative differences between five-star and one-star reviews. \n\n\n<br><br><br>\n\n## One-star and five-star reviews of Chinese restaurants\n\nLet's dig a little deeper. As noted in the previous part, Chinese and Casual Western restaurants -- overall -- have the highest numbers of reviews and some of the lowest mean ratings across all cuisines. Let's take advantage of this by looking more closely at one single slice of the data. \n\nBelow, is a network graph of words used in one-star reviews of Chinese restaurants in the Klang Valley. The thickness of the lines between words indicates the number of times a word pairing has shown up in reviews. The transparency of the lines indicates the strength of the correlation between those two words. Key topics have been highlighted by me.  \n\nWe see a combination of quite undesirable experiences: smelly, pricey, not fresh, rude, long waits and poor quality. Additionally, service and the overall \"experience\" show up prominently as well (especially when it relates to events such as Chinese New Year, which often sees large banquets for friends, family and associates). \n\n\n<br>\n\n```{r}\nclean_common_foods <- function(tbl){\n  tbl |> \n    mutate(review = str_replace_all(review, \"Dim sum|Dim Sum|dim sum\", \"dimsum\"), \n         review = str_replace_all(review, \"Tom Yam|Tom Yum|Tom yam|Tom yum|tom yam|tom yum\", \"tomyum\"), \n         review = str_replace_all(review, \"Char Siew|Char siew|char siew\", \"charsiew\"), \n         review = str_replace_all(review, \"Hokkien mee|Hokkien Mee|hokkien mee\", \"hokkienmee\"), \n         review = str_replace_all(review, \"Roast Duck|Roast duck|roast duck\", \"roastduck\"),\n         review = str_replace_all(review, \"Fried Rice|Fried rice|fried rice\", \"friedrice\"), \n         review = str_replace_all(review, \"Roast pork|roast pork|Roast Pork\", \"roastpork\"), \n         review = str_replace_all(review, \"Mee hoon|mee hoon|Bee hoon|bee hoon|Mee Hoon|Bee Hoon\", \"beehoon\"), \n         review = str_replace_all(review, \"Bak kut teh|bak kut teh|Bak Kut Teh\", \"bakkutteh\"), \n         review = str_replace_all(review, \"char kuey teow|Char kuey teow|char koay teow|Char Kuey Teow\", \"charkueyteow\"),\n         review = str_replace_all(review, \"Hong Kong|hong kong\", \"hongkong\"), \n         review = str_replace_all(review, \"Siew yoke|siew yoke|siu yuk|Siu Yuk\", \"siewyoke\"), \n         review = str_replace_all(review, \"chee cheong fun|Chee cheong fun\", \"cheecheongfun\"), \n         review = str_replace_all(review, \"Kaya toast|kaya toast\", \"kaya toast\"), \n         review = str_replace_all(review, \"Din Tai Fung|din tai fung\", \"dintaifung\"), \n         review = str_replace_all(review, \"Salted egg|salted egg\", \"saltedegg\"), \n         review = str_replace_all(review, \"Kuala Lumpur|kuala lumpur|Kuala lumpur\", \"kl\"), \n         review = str_replace_all(review, \"Xiao long bao|xiao long bao|Xiao Long Bao\", \"xiaolongbao\"), \n         review = str_replace_all(review, \"Chicken rice|chicken rice|Chicken Rice\", \"chickenrice\"), \n         review = str_replace_all(review, \"Foreign workers|foreign workers\", \"foreignworkers\"))\n}\n```\n\n```{r one-star-network-graph, eval=FALSE}\n\n# Just going to load the result in the html, \n# So as to not run the network graph every time we render \n\ngoogle_chinese_1_star_network <- google_kl_cuisine |> \n  clean_common_foods() |>  \n  mutate(review_id = row_number()) |> \n  filter(cuisine == \"Chinese\" & rating == 1) |> \n  unnest_tokens(word, review) |> \n  anti_join(stop_words) |> \n  filter(str_detect(word, \"[a-z]\")) |> \n  add_count(word) |> \n  filter(n > 10) |> \n  pairwise_cor(word, review_id, sort = TRUE) |> \n  filter(correlation >= .15) |> \n  left_join(\n    google_kl_cuisine |> \n      clean_common_foods() |> \n      mutate(review_id = row_number()) |> \n      filter(cuisine == \"Chinese\" & rating == 1) |> \n      unnest_tokens(word, review) |> \n      anti_join(stop_words) |> \n      filter(str_detect(word, \"[a-z]\")) |> \n      add_count(word) |> \n      filter(n > 10) |> \n      pairwise_count(word, review_id, sort = TRUE), \n    by = c(\"item1\", \"item2\")\n  ) |> \n  igraph::graph_from_data_frame() |> \n  ggraph(layout = \"fr\") + \n  geom_edge_link(aes(alpha = correlation, edge_width = n), colour = \"#457b9d\", check_overlap = TRUE) +\n  scale_edge_width_continuous(range = c(.1, 4), trans = \"log10\") +\n  scale_alpha_continuous(range = c(0.01, 0.08)) +\n  geom_node_point(colour = \"#457b9d\", alpha = 0.2, size = .5) +\n  geom_node_text(aes(label = ifelse(name %in% \n                                        c(\"waited\", \"service\", \"experience\", \n                                          \"price\", \"quality\", \"fresh\", \n                                          \"tasted\", \"disappointing\"),\n                                      str_to_title(name),\n                                      \"\")), \n                 size = 3.5, \n                 alpha = .9, \n                 colour = \"#00afb9\", \n                 fontface = \"bold\") +\n  geom_node_text(aes(label = name), size = 3.1, alpha = .4, \n                 colour = \"#caf0f8\") + \n  theme(legend.position = \"none\", \n        plot.caption = element_text(hjust = .5, colour = \"#219ebc\"), \n        panel.background = element_rect(fill = \"#03071e\"), \n        plot.background = element_rect(fill = \"#1b263b\"), \n        plot.title = element_text(colour = \"#219ebc\"), \n        plot.subtitle = element_text(colour = \"#219ebc\", size = 10)) + \n  labs(title = \"Network graph of One-star Chinese Restaurant Google Review Descriptions\", \n       subtitle = \"Line thickness indicates number of events involving those words, line transparency indicates the correlation between words. Key topics highlighted.\", \n       caption = \"Source: maps.google.com; Ng Choon Khon\")\n\nggsave(here(\"plots\", \"google_chinese_1_star_network_graph.png\"), \n       width = 10, height = 6.5, units = \"in\", dpi = 300)\n```\n\n\n[![Click image for full size](./plots/google_chinese_1_star_network_graph.png)](https://raw.githubusercontent.com/aimdata-labs/google_trip_reviews_kl_site/main/plots/google_chinese_1_star_network_graph.png)\n\n<br>\n\nLet's look at the flipside and see what reviewers said about five-star dining experiences in Chinese restaurants. As with the plot above, line thickness shows the frequency of the word pair and the transparency indicates the correlation. Key topics once again highlighted by me. \n\nWhilst five-star reviews of Chinese restaurants are much more numerous, we don't necessarily see a greater variety of expression (just more foods mentioned), we see that points of failure are very similar to points of success for Chinese restaurants: freshness, friendly service, waiting times and reasonable pricing. We also see a key phrase that we will delve into in a later section: \"highly recommended\". \n\n<br>\n\n```{r google-five-star-chinese-network, eval=FALSE}\ngoogle_chinese_5_star_network <- google_kl_cuisine |> \n  clean_common_foods() |>  \n  mutate(review_id = row_number()) |> \n  filter(cuisine == \"Chinese\" & rating == 5) |> \n  unnest_tokens(word, review) |> \n  anti_join(stop_words) |> \n  filter(str_detect(word, \"[a-z]\")) |> \n  add_count(word) |> \n  filter(n > 20) |> \n  pairwise_cor(word, review_id, sort = TRUE) |> \n  filter(correlation >= .15) |> \n  left_join(\n    google_kl_cuisine |> \n      clean_common_foods() |> \n      mutate(review_id = row_number()) |> \n      filter(cuisine == \"Chinese\" & rating == 5) |> \n      unnest_tokens(word, review) |> \n      anti_join(stop_words) |> \n      filter(str_detect(word, \"[a-z]\")) |> \n      add_count(word) |> \n      filter(n > 20) |> \n      pairwise_count(word, review_id, sort = TRUE), \n    by = c(\"item1\", \"item2\")\n  ) |> \n  igraph::graph_from_data_frame() |> \n  ggraph(layout = \"fr\") + \n  geom_edge_link(aes(alpha = correlation, edge_width = n), colour = \"#457b9d\", check_overlap = TRUE) +\n  scale_edge_width_continuous(range = c(.1, 4), trans = \"log10\") +\n  scale_alpha_continuous(range = c(0.01, 0.08)) +\n  geom_node_point(colour = \"#457b9d\", alpha = 0.2, size = .5) +\n  geom_node_text(aes(label = ifelse(name %in% \n                                        c(\"peak\", \"service\", \"experience\", \n                                          \"price\", \"pork\", \"fresh\", \"fish\",\n                                          \"tasted\", \"recommended\", \"friendly\", \"crispy\"),\n                                      str_to_title(name),\n                                      \"\")), \n                 size = 3.2, \n                 alpha = .9, \n                 colour = \"#00afb9\", \n                 fontface = \"bold\") +\n  geom_node_text(aes(label = name), size = 3.1, alpha = .4, \n                 colour = \"#caf0f8\") + \n  theme(legend.position = \"none\", \n        plot.caption = element_text(hjust = .5, colour = \"#219ebc\"), \n        panel.background = element_rect(fill = \"#03071e\"), \n        plot.background = element_rect(fill = \"#1b263b\"), \n        plot.title = element_text(colour = \"#219ebc\"), \n        plot.subtitle = element_text(colour = \"#219ebc\", size = 10)) + \n  labs(title = \"Network graph of Five-star Chinese Restaurant Google Review Descriptions\", \n       subtitle = \"Line thickness indicates number of reviews involving those words, line transparency indicates the correlation between words. Key topics highlighted.\", \n       caption = \"Source: maps.google.com; Ng Choon Khon\")\n\nggsave(here(\"plots\", \"google_chinese_5_star_network_graph.png\"), \n       width = 10, height = 6.5, units = \"in\", dpi = 300)\n```\n\n\n[![Click image for full size](./plots/google_chinese_5_star_network_graph.png)](https://raw.githubusercontent.com/aimdata-labs/google_trip_reviews_kl_site/main/plots/google_chinese_5_star_network_graph.png)\n\n<br>\n\nAs a whole, Chinese restaurants seem to be judged by Google reviewers on quite a consistent set of criteria. \n\n<br><br><br>\n\n\n\n## Topic modelling and expectations\n\nSince reviews are so heavily skewed towards 5 stars, let's use topic modelling to break down reviews into just two groups which I have termed **Recommended** and **Everything else**. This will hopefully sort out all the five- and four-star reviews that are not actual recommendations. \n\nBelow, the per-topic-per-word probabilities of bigrams in the Google dataset have been plotted. The x-axes indicate the probability of each bigram appearing in reviews under each topic. \n\nBigrams have been used here because individual words are not as informative (\"service\" vs. \"excellent service\"). As mentioned, our collective vocabulary is quite limited when it comes to food: \"fine dining\" is used both as a compliment and as a mocking pejorative. \n\n<br> \n\n```{r lda, fig.height=6}\ngoogle_bigrams_dtm <- google_rating_bigrams |>  \n  cast_dtm(rating, bigram, n)\n\ngoogle_bigrams_lda <- \n  LDA(google_bigrams_dtm, k = 2, control = list(seed = 133))\n\ngoogle_bigrams_topics <- tidy(google_bigrams_lda, matrix = \"beta\")\n\ngoogle_bigrams_topics |> \n  # Remember topic 1 is recommended \n  mutate(topic = ifelse(\n    topic == 1, \"2. Everything else\", \"1. Recommended\"\n  )) |> \n  group_by(topic) |> \n  slice_max(beta, n = 20) |> \n  ungroup() |> \n  arrange(topic, -beta) |> \n  ggplot(aes(x = beta, y = reorder_within(term, beta, topic), fill = topic)) + \n  geom_col() + \n  scale_fill_manual(\n    values = c(\"1. Recommended\" = \"#8ac926\", \n               \"2. Everything else\" = \"#ff595e\")\n  ) +\n  facet_wrap(~ topic, scales = \"free_y\") + \n  scale_y_reordered() + \n  labs(title = \"20 most-probable bigrams per topic\", \n       subtitle = \"From Google reviews of restaurants in the Klang Valley.\\nOnly shows bigrams that occur more than 20 times in the dataset.\", \n       y = \"\", \n       x = \"Per-topic probability (beta)\") + \n  guides(fill = \"none\") +\n  theme(strip.background = element_rect(fill = \"black\"), \n        strip.text = element_text(size = 10, face = \"bold\"))\n\nggsave(here(\"plots\", \"google_lda.png\"), \n       width = 7, height = 4, units = \"in\", dpi = 300)\n```\n\n\n<br>\n\nLet's take a closer look at individual bigrams. We'll start with some of the most common foods that show up in Google reviews. With the plots below, the important thing is to compare the relative per-topic probabilities of each of the bigrams that occur in each topic i.e. how probable it is that a particular food will be in a \"Recommended\" review.   \n\nRestaurants seem to have the worst performance with chicken rice, fried rice, char siew, dim sum and roast pork. Amongst cuisines, Indian and Italian food seem to be recommended more often than not; the opposite is true for Chinese restaurants. \n\nPerhaps reviewers are less generous with foods they are familiar with. I know I am: I've had extremely good char siew and roast pork (that can be easily and readily accessed) and can be uncharitable and judgemental when they are done poorly. \n\nGiven the low percentage of reviews that use Malay that we mentioned in the previous part, many of the most common foods here are not halal at all. This underlines that the demographics of Google reviewers (who are already much more likely to be locals than Trip Advisor reviewers) are skewed heavily towards minorities. \n\n<br>\n\n```{r common-foods-lda, fig.height=6.5}\n\ngoogle_bigrams_topics |> \n   # Remember topic 1 is recommended \n  mutate(topic = ifelse(\n    topic == 1, \"2. Everything else\", \"1. Recommended\"\n  )) |> \n  filter(term %in% c(\n    # Because they stayed long enough for dessert?\n    \"ice cream\",\n    \"indian food\", \n    \"chinese restaurant\", \n    \"roast pork\", \n    \"salted egg\", \n    \"dim sum\", \n    \"nasi lemak\",  \n    \"fried chicken\", \n    \"fried rice\", \n    \"japanese food\", \n    \"thai food\", \n    \"chicken rice\", \n    \"italian restaurant\", \n    \"western food\",\n    \"nasi kandar\", \n    \"char siew\"\n  )) |> \n  ggplot(aes(x = beta, \n             y = fct_rev(topic))) + \n  geom_col(aes(fill = topic)) + \n  scale_fill_manual(\n    values = c(\"1. Recommended\" = \"#8ac926\", \n               \"2. Everything else\" = \"#ff595e\")\n  ) +\n  facet_wrap(~ term) + \n  guides(fill = \"none\") + \n  theme(strip.background = element_rect(fill = \"black\"), \n        axis.text.x = element_text(size = 6)) + \n  labs(title = \"Per-topic probabilities of foods and cuisines\", \n       subtitle = \"Google reviews in the Klang Valley\", \n       y = \"\")\n\nggsave(here(\"plots\", \"google_foods_lda.png\"), \n       width = 8, height = 5, units = \"in\", dpi = 300)\n```\n\n<br>\n\nThe next plot below shows some of the most common general descriptors (not specific to food) of restaurants. \n\n\"Friendly staff\" and \"nice food\", more often than not, are complimentary terms, but do by no means guarantee a positive review or a recommendation. Likewise, having a \"nice environment\" is important, but nowhere as important as having \"excellent food\" or \"excellent service\". \n\nBringing up \"food quality\" is more likely a pejorative than it is not. If service is very important to you, the terms \"excellent service\" and \"friendly staff\" are good distinguishers in Google reviews. Unfortunately, a lot of people to whom service is very important are unable to acknowledge this fact about themselves. \n\n<br>\n\n```{r general-descriptors-lda, fig.height = 5.5}\ngoogle_bigrams_topics |> \n   # Remember topic 1 is recommended \n  mutate(topic = ifelse(\n    topic == 1, \"2. Everything else\", \"1. Recommended\"\n  )) |> \n  filter(term %in% c(\n    \"reasonable price\",\n    \"highly recommend\", \n    \"highly recommended\", \n    \"amazing food\", \n    \"nice environment\", \n    \"food quality\", \n    \"nice food\",  \n    \"bit pricey\", \n    \"excellent service\", \n    \"decent food\", \n    \"friendly staff\", \n    \"excellent food\"\n  )) |> \n  ggplot(aes(x = beta, \n             y = fct_rev(topic))) + \n  geom_col(aes(fill = topic)) + \n  scale_fill_manual(\n    values = c(\"1. Recommended\" = \"#8ac926\", \n               \"2. Everything else\" = \"#ff595e\")\n  ) +\n  facet_wrap(~ term) + \n  guides(fill = \"none\") + \n  theme(strip.background = element_rect(fill = \"black\"), \n        axis.text.x = element_text(size = 6)) +\n  labs(y = \"\", \n       title = \"Per-topic probabilities of general restaurant descriptors\")\n\nggsave(here(\"plots\", \"google_general_descriptions_lda.png\"), \n       width = 8, height = 5, units = \"in\", dpi = 300)\n```\n\n\n<br>\n\nHowever, this isn't all that applicable to real life, since you can't search all reviews across all restaurants for keywords. Google Maps does not work the same way Google Search does (at least before it became useless). You can only search for keywords within the reviews of a single restaurant.\n\nThis is another point in favour of online reviews just being a marketing ploy. Not to say that marketing ploys cannot be informative, just that their information is compromised. \n\nThere is, however, one keyword search that does work. \n\n\n<br><br><br>\n\n## \"Highly recommended restaurant\" (sic)\n\n<br>\n\n[![What directory mode looks like](./plots/directory_mode.png)](https://raw.githubusercontent.com/aimdata-labs/google_trip_reviews_kl_site/main/plots/directory_mode.png)\n\n<br>\n\nType in \"highly recommended restaurant\" (sic) into Google Maps (or \"recommended restaurant\" on iOS) and see what you get. I get a list of some pretty good restaurants, with no photos. I don't agree with every entry, but this \"directory\" mode is probably the best (but still flawed) performance I've seen from Google Maps in a long time. \n\nNow, this may seem like we've somehow gamed the system, but to bring us back down to Earth, this list of highly recommended restaurants is very much part of the play, according to Gemini (Google Maps Support has no real answers on this topic): \n\n>When you type \"highly recommend restaurant\" into the search bar, Google Maps interprets those words as keywords rather than a command. Instead of looking for a specific badge, the app uses its algoritm to build a list based on several \"trust signals.\"\n\n>1. Keyword matching (SEO) [...] \"This place is highly recommended\" [...]\n>2. High \"Prominence\" Scores. Google defines \"Prominence\" as how well-known or important a business is. When you ass \"highly recommended\" to your search, the algorithm prioritizes restaurants with: high volume of 4.5+ star ratings. Mentions on \"Best Of\" lists [...]. Heavy foot traffic (Google tracks how many people acturally visit the location). \n> 3. The \"Top Rated\" Filter. By using that specific phrase, you are essentially triggering Google's built-in Rating Filter. Google will automatically filter out businesses with low ratings (usually anything below a 4.0) [...].\n>4. Machine Learning & \"Your Match\"[...]\n\nThey have also included a \"Review Snippet\" so you can tell why a particular restaurant made it to this list. Also note from these screenshots that the actual rating is not that important: restaurants are in the range of 4.0 to 5.0, but that's about it, as if Google also knows that the mean rating is not a particularly useful metric. \n\nConversely, when you type in \"highly recommended restaurants\" or just \"highly recommended\", \n\n>the list looks different—often featuring large, swipeable photos—because Google switches from a standard \"directory\" mode to \"Discovery Mode.\" Google knows that when you use words like \"highly recommended,\" you aren't just looking for an address; you’re looking for an experience. \n\nWhen not in \"directory\" mode, the factors that Google Maps takes into account are not desirable (at least by me):\n\n>1. Visual \"proof\" of recommendation. Google's AI specifically pulls photos it identifies as \"high quality\"\n>2. The \"Discover Through Photos\" feature. [...] When you use subjective search terms (like *highly recommended*, *beautiful*, *cozy*), Google assumes yuou want to browse visually. \n>3. AI Dish Matching\n>4. High Engagement Signals. [...] Google rewards businesses that have high engagement. If a restaurant has 1,000 photos uploaded by customers, Google has a huge library to make the search result look more attractive and \"trustworthy\" to you. \n\nThis is likely why searching for \"best restaurant\" yields such poor results. You're probably getting results that are more easily manipulated and influenced i.e. upload a review and a photo for a free ice cream. \n\nFor reference, Google Maps's base algorithm (which is used when you type in \"restaurants in area X\") relies on: \n\n>1. Distance\n>2. Relevance. [...] Category matching, [...] Menu and Attributes, [...] Open Now\n>3. Prominence. [...] Review velocity [...] how ofren peole are leaving reviews. [...] Web presence [...]. SEO strength: the ranking of the restaurant's actual website also matters. \n>4. Personalisation\n\nBut back to \"directory\" mode: even though you get more satisfactory results, bear in mind that the Google rating has already been taken into account twice: ratings are part of how Google calculates \"Prominence\" and the algorithm also applies a rating filter. \n\nThat it does not solely act like a keyword is likely to prevent more manipulation and SEO shenanigans. So far, I've only been able to trigger **Directory mode** with this one phrase. What else can trigger **Directory mode** on Google Maps? In these trying times, could some variation of \"reasonable price restaurant\" work?\n\n\n\n<br><br><br>\n\n## Conclusions part two\n\nOnline reviews are part of a highly-gamified ecosystem. Standard searches will leave you at the mercy of content pushed by SEO, influencers and black-box algorithms. \n\nWhilst there are ways around this, like directory mode, ultimately, the system fundamentally does not seem to be geared towards the needs of customers (especially not if you need tips and tricks just to get passable performance). Customisation occurs mostly on the back-end: there is no way to tell Google what ypu consider relevant to you. Instead, they glean this from your online footprint, believing you will unconsciously betray your wants and needs to them.\n\nTherein lies the rub. Just because you know my sex, my income, whether or not I'm pregnant, and can put me into one of their numerous categories and clusters does not mean you know me as a person, or even as a customer. You could argue that this widespread data theft might not lead to the best results for one person, but that it is used to produce apps and algorithms that are able to serve the majority well. \n\nBut I do not think Google Reviews serve the majority well. This has to do with the fact that online reviews are not solely about food. It is an \"experience\" that must be upsold and marketed to you. In trying to be Instagram, they have forgotten how to be a map, a directory. The wanton privileging of photos and influencer reels is not helpful when I just want a good meal. \n\nSo, are online reviews useful? Eh. 2/5. \n\n\n\n\n\n<br><br><br>\n\n\n\n## Appendices\n\nEven within the much more verbose reviews on Trip Advisor, we still see that the language used is still very limited, irrespective of rating. \n\n<br>\n\n```{r fig.height=7}\ntrip_rating_bigrams |> \n  filter(bigram %out% c(\"kuala lumpur\")) |> \n  mutate(rating = as.factor(rating)) |> \n  arrange(desc(n)) |> \n  group_by(rating) |> \n  slice(1:15) |> \n  ungroup() |> \n  ggplot(aes(x = n, y = reorder_within(bigram, n, rating))) + \n  geom_col(aes(fill = rating)) + \n  scale_fill_manual(values = c(\n    `1` = \"#e76f51\", \n    `2` = \"#f4a261\", \n    `3` = \"#e9c46a\", \n    `4` = \"#2a9d8f\", \n    `5` = \"#264653\"\n  )) +\n  facet_wrap(~ rating, scales = \"free\") +\n  scale_y_reordered() + \n  guides(fill = \"none\") + \n  theme(strip.background = element_rect(fill = \"black\")) + \n  labs(x = \"Count\", \n       y = \"\", \n       title = \"Most common bigrams by rating, Trip Advisor reviews\")\n  \n```\n<br>\n\nJust as an interesting point, when we look at one-star Trip Advisor reviews for Casual Western restaurants, we see that the words \"hot\" and \"cold\" are quite prominent. \n\nI believe this has to do with underprepared and/or improperly microwaved food. Microwaved food, often bought from a food service or brought from a central kitchen, is one of the sad curses of modern dining. Waves of consolidation up and down the restaurant supply chain have left all hawkers in Singapore with one choice of yellow mee or only one type of bee hoon. In America, US Foods and Sysco have completely sewn up the supply chain, leading to all jalapeño poppers and mozzarella sticks coast-to-coast to be the exact same. \n\nWhilst that level of corporate consolidation has not yet occurred in Malaysia, the process is nevertheless underway. This is something we must guard against and prevent, as homogeneity isn't even prized in prison meals. \n\n<br>\n\n[![Click image for full size](./plots/trip_casual_western_1_star_network_graph.png)](https://raw.githubusercontent.com/aimdata-labs/google_trip_reviews_kl_site/main/plots/trip_casual_western_1_star_network_graph.png)\n\n```{r eval=FALSE}\ntrip_casual_western_1_star_network <- trip_kl_cuisine |> \n  mutate(review_id = row_number()) |> \n  filter(cuisine == \"Casual Western\" & rating == 1) |> \n  unnest_tokens(word, review) |> \n  anti_join(stop_words) |> \n  filter(str_detect(word, \"[a-z]\")) |> \n  add_count(word) |> \n  filter(n > 20) |> \n  pairwise_cor(word, review_id, sort = TRUE) |> \n  filter(correlation >= .18) |> \n  left_join(\n    trip_kl_cuisine |> \n      mutate(review_id = row_number()) |> \n      filter(cuisine == \"Casual Western\" & rating == 1) |> \n      unnest_tokens(word, review) |> \n      anti_join(stop_words) |> \n      filter(str_detect(word, \"[a-z]\")) |> \n      add_count(word) |> \n      filter(n > 20) |> \n      pairwise_count(word, review_id, sort = TRUE), \n    by = c(\"item1\", \"item2\")\n  ) |> \n  igraph::graph_from_data_frame() |> \n  ggraph(layout = \"fr\") + \n  geom_edge_link(aes(alpha = correlation, edge_width = n), colour = \"#457b9d\", check_overlap = TRUE) +\n  scale_edge_width_continuous(range = c(.1, 4), trans = \"log10\") +\n  scale_alpha_continuous(range = c(0.01, 0.08)) +\n  geom_node_point(colour = \"#457b9d\", alpha = 0.2, size = .5) +\n  geom_node_text(aes(label = ifelse(name %in% \n                                        c(\"wait\", \"hot\", \"cold\", \n                                          \"service\", \"experience\", \"food\", \n                                          \"serve\"),\n                                    name,\n                                      \"\")), \n                 size = 3.1, \n                 alpha = .9, \n                 colour = \"#00afb9\", \n                 fontface = \"bold\") +\n  geom_node_text(aes(label = name), size = 3.1, alpha = .4, \n                 colour = \"#caf0f8\") + \n  theme(legend.position = \"none\", \n        plot.caption = element_text(hjust = .5, colour = \"#219ebc\"), \n        panel.background = element_rect(fill = \"#03071e\"), \n        plot.background = element_rect(fill = \"#1b263b\"), \n        plot.title = element_text(colour = \"#219ebc\"), \n        plot.subtitle = element_text(colour = \"#219ebc\", size = 10)) + \n  labs(title = \"Network graph of One-star Casual Western Restaurant Trip Advisor Review Descriptions\", \n       subtitle = \"Line thickness indicates number of events involving those words, line transparency indicates the correlation between words. Key topics highlighted.\", \n       caption = \"Source: TripAdvisor; Ng Choon Khon\")\n\nggsave(here(\"plots\", \"trip_casual_western_1_star_network_graph.png\"), \n       width = 10, height = 6.5, units = \"in\", dpi = 300)\n```\n\n<br>\n\n\"Cold\" shows up again under one-star Google reviews of Casual Western restaurants, indicating poor attention to detail and/or rushed food preparation. Though it doesn't necessarily point towards microwaved foods. \n\nAs a side note (in an appendix), there is a way to microwave food well -- apparently using the defrost setting achieves the most even cooking. \n\n<br>\n\n[![Click image for full size](./plots/google_casual_western_1_star_network_graph.png)](https://raw.githubusercontent.com/aimdata-labs/google_trip_reviews_kl_site/main/plots/google_casual_western_1_star_network_graph.png)\n\n```{r eval=FALSE}\ngoogle_casual_western_1_star_network <- google_kl_cuisine |> \n  mutate(review_id = row_number()) |> \n  filter(cuisine == \"Casual Western\" & rating == 1) |> \n  unnest_tokens(word, review) |> \n  anti_join(stop_words) |> \n  filter(str_detect(word, \"[a-z]\")) |> \n  add_count(word) |> \n  filter(n > 15) |> \n  pairwise_cor(word, review_id, sort = TRUE) |> \n  filter(correlation >= .12) |> \n  left_join(\n    google_kl_cuisine |> \n      mutate(review_id = row_number()) |> \n      filter(cuisine == \"Casual Western\" & rating == 1) |> \n      unnest_tokens(word, review) |> \n      anti_join(stop_words) |> \n      filter(str_detect(word, \"[a-z]\")) |> \n      add_count(word) |> \n      filter(n > 15) |> \n      pairwise_count(word, review_id, sort = TRUE), \n    by = c(\"item1\", \"item2\")\n  ) |> \n  igraph::graph_from_data_frame() |> \n  ggraph(layout = \"fr\") + \n  geom_edge_link(aes(alpha = correlation, edge_width = n), colour = \"#457b9d\", check_overlap = TRUE) +\n  scale_edge_width_continuous(range = c(.1, 4), trans = \"log10\") +\n  scale_alpha_continuous(range = c(0.01, 0.08)) +\n  geom_node_point(colour = \"#457b9d\", alpha = 0.2, size = .5) +\n  geom_node_text(aes(label = ifelse(name %in% \n                                        c(\"wait\", \"hot\", \"cold\", \n                                          \"service\", \"quality\", \"rude\",\n                                          \"serve\", \"taste\", \"price\"),\n                                    name,\n                                      \"\")), \n                 size = 3.1, \n                 alpha = .9, \n                 colour = \"#00afb9\", \n                 fontface = \"bold\") +\n  geom_node_text(aes(label = name), size = 3.1, alpha = .4, \n                 colour = \"#caf0f8\") + \n  theme(legend.position = \"none\", \n        plot.caption = element_text(hjust = .5, colour = \"#219ebc\"), \n        panel.background = element_rect(fill = \"#03071e\"), \n        plot.background = element_rect(fill = \"#1b263b\"), \n        plot.title = element_text(colour = \"#219ebc\"), \n        plot.subtitle = element_text(colour = \"#219ebc\", size = 10)) + \n  labs(title = \"Network graph of One-star Casual Western Restaurant Google Review Descriptions\", \n       subtitle = \"Line thickness indicates number of events involving those words, line transparency indicates the correlation between words. Key topics highlighted.\", \n       caption = \"Source: maps.google.com; Ng Choon Khon\")\n\nggsave(here(\"plots\", \"google_casual_western_1_star_network_graph.png\"), \n       width = 10, height = 6.5, units = \"in\", dpi = 300)\n```\n\n<br>\n\nIn contrast, when we look at five-star reviews of Casual Western restaurants on Trip Advisor, we see a slew of foods which would suffer if the preparation were lacking: steaks, ribs, and even sausages would suffer from a microwave. \n\n<br>\n\n[![Click image for full size](./plots/google_casual_western_1_star_network_graph.png)](https://raw.githubusercontent.com/aimdata-labs/google_trip_reviews_kl_site/main/plots/google_casual_western_1_star_network_graph.png)\n\n```{r eval=FALSE}\ntrip_casual_western_5_star_network <- trip_kl_cuisine |> \n  mutate(review_id = row_number()) |> \n  filter(cuisine == \"Casual Western\" & rating == 5) |> \n  unnest_tokens(word, review) |> \n  anti_join(stop_words) |> \n  filter(str_detect(word, \"[a-z]\")) |> \n  add_count(word) |> \n  filter(n > 20) |> \n  pairwise_cor(word, review_id, sort = TRUE) |> \n  filter(correlation >= .18) |> \n  left_join(\n    trip_kl_cuisine |> \n      mutate(review_id = row_number()) |> \n      filter(cuisine == \"Casual Western\" & rating == 5) |> \n      unnest_tokens(word, review) |> \n      anti_join(stop_words) |> \n      filter(str_detect(word, \"[a-z]\")) |> \n      add_count(word) |> \n      filter(n > 20) |> \n      pairwise_count(word, review_id, sort = TRUE), \n    by = c(\"item1\", \"item2\")\n  ) |> \n  igraph::graph_from_data_frame() |> \n  ggraph(layout = \"fr\") + \n  geom_edge_link(aes(alpha = correlation, edge_width = n), colour = \"#457b9d\", check_overlap = TRUE) +\n  scale_edge_width_continuous(range = c(.1, 4), trans = \"log10\") +\n  scale_alpha_continuous(range = c(0.01, 0.08)) +\n  geom_node_point(colour = \"#457b9d\", alpha = 0.2, size = .5) +\n  geom_node_text(aes(label = ifelse(name %in% \n                                        c(\"friendly\", \"ribs\", \"steak\", \n                                          \"sausage\", \"highly\", \"beer\"),\n                                    name,\n                                      \"\")), \n                 size = 3.1, \n                 alpha = .9, \n                 colour = \"#00afb9\", \n                 fontface = \"bold\") +\n  geom_node_text(aes(label = name), size = 3.1, alpha = .4, \n                 colour = \"#caf0f8\") + \n  theme(legend.position = \"none\", \n        plot.caption = element_text(hjust = .5, colour = \"#219ebc\"), \n        panel.background = element_rect(fill = \"#03071e\"), \n        plot.background = element_rect(fill = \"#1b263b\"), \n        plot.title = element_text(colour = \"#219ebc\"), \n        plot.subtitle = element_text(colour = \"#219ebc\", size = 10)) + \n  labs(title = \"Network graph of One-star Casual Western Restaurant Trip Advisor Review Descriptions\", \n       subtitle = \"Line thickness indicates number of events involving those words, line transparency indicates the correlation between words. Key topics highlighted.\", \n       caption = \"Source: TripAdvisor; Ng Choon Khon\")\n\nggsave(here(\"plots\", \"trip_casual_western_5_star_network_graph.png\"), \n       width = 10, height = 6.5, units = \"in\", dpi = 300)\n    \n```\n\n\n\n\n\n\n\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":false,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"wrap","code-link":false,"code-line-numbers":false,"code-tools":true,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":true,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"toc-depth":4,"embed-resources":true,"output-file":"part_two_words.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.42","editor":"source","brand":"brand/_brand.yml","theme":["cosmo","brand"],"toc-location":"left","toc-expand":true,"code-summary":"Show code","page-layout":"full","title":"How useful are restaurant reviews? Google and Trip Advisor reviews in the Klang Valley, Malaysia","subtitle":"Part two: Words","author":"Sean Ng","organization":"AIMdata","date-modified":"11 January 2026"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}